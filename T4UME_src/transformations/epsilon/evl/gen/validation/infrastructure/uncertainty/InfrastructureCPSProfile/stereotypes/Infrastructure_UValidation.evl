
/*
Autogenerated Uncertainty Detection Rule (UDR).
The UDR aims at detecting potential infrastructural uncertainties caused by missing
information on UML Model.

This rule check the following stereotype: 
InfrastructureCPSProfile::Infrastructure. 

Infrastructure defines the following properties:
-	InfrastructureCPSProfile::Infrastructure::description
-	InfrastructureCPSProfile::Infrastructure::id
-	InfrastructureCPSProfile::Infrastructure::virtualUnits
-	InfrastructureCPSProfile::Infrastructure::infrastructureElements
-	InfrastructureCPSProfile::Infrastructure::applicationElements
-	InfrastructureCPSProfile::Infrastructure::integrationElements
-	InfrastructureCPSProfile::Infrastructure::cloudServices
-	InfrastructureCPSProfile::Infrastructure::containers
-	InfrastructureCPSProfile::Infrastructure::metrics
-	InfrastructureCPSProfile::Infrastructure::units
-	InfrastructureCPSProfile::Infrastructure::SensorDataMngmtMechanism
-	InfrastructureCPSProfile::Infrastructure::testConfigs
-	InfrastructureCPSProfile::Infrastructure::hasSensorDataManagementMechanism
-	InfrastructureCPSProfile::Infrastructure::configs
-	InfrastructureCPSProfile::Infrastructure::targetPackage
*/
//libraries
import "../../../../../../../eol/library/gen/profiles/InfrastructureUncertaintyProfile.eol";
import "../../../../../../../eol/library/gen/profiles/InfrastructureCPSProfile.eol";
import "../../../../../../../eol/library/gen/profiles/CoreProfile.eol";
import "../../../../../../../eol/library/gen/profiles/InternalUProfileLibrary.eol";
import "../../../../../../../eol/library/gen/uncertainties/UncertaintyTaxonomyLibrary.eol";

pre {
var plugin : new Native("at.ac.tuwien.dsg.T4UME");
var UMLUtil = plugin.getUMLUtil();
var ModelerAgent = plugin.getModelerAgent();
var infrastructureUncertaintyProfile = Profile.all.selectOne(e|e.name = "InfrastructureUncertaintyProfile");
var infrastructureCPSProfile = Profile.all.selectOne(e|e.name = "InfrastructureCPSProfile");
var internalUProfileLibrary = Profile.all.selectOne(e|e.name = "InternalUProfileLibrary");
var coreProfile = Profile.all.selectOne(e|e.name = "CoreProfile");

}

context Infrastructure {
	
	critique virtualUnits_Specification {
	
		guard {
			var condition = self.virtualUnits.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.virtualUnits.isEmpty();
		}
		
		message: "Missing virtualUnits on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique virtualUnitsSpecification {
	
		guard {
			var condition = not self.virtualUnits.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.virtualUnits.isEmpty();
		}		
		message: "Constraint virtualUnitsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique infrastructureElements_Specification {
	
		guard {
			var condition = self.infrastructureElements.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.infrastructureElements.isEmpty();
		}
		
		message: "Missing infrastructureElements on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique infrastructureElementsSpecification {
	
		guard {
			var condition = not self.infrastructureElements.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.infrastructureElements.isEmpty();
		}		
		message: "Constraint infrastructureElementsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique applicationElements_Specification {
	
		guard {
			var condition = self.applicationElements.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.applicationElements.isEmpty();
		}
		
		message: "Missing applicationElements on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique applicationElementsSpecification {
	
		guard {
			var condition = not self.applicationElements.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.applicationElements.isEmpty();
		}		
		message: "Constraint applicationElementsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique integrationElements_Specification {
	
		guard {
			var condition = self.integrationElements.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.integrationElements.isEmpty();
		}
		
		message: "Missing integrationElements on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique integrationElementsSpecification {
	
		guard {
			var condition = not self.integrationElements.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.integrationElements.isEmpty();
		}		
		message: "Constraint integrationElementsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique cloudServices_Specification {
	
		guard {
			var condition = self.cloudServices.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.cloudServices.isEmpty();
		}
		
		message: "Missing cloudServices on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique cloudServicesSpecification {
	
		guard {
			var condition = not self.cloudServices.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.cloudServices.isEmpty();
		}		
		message: "Constraint cloudServicesIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique containers_Specification {
	
		guard {
			var condition = self.containers.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.containers.isEmpty();
		}
		
		message: "Missing containers on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique containersSpecification {
	
		guard {
			var condition = not self.containers.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.containers.isEmpty();
		}		
		message: "Constraint containersIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique metrics_Specification {
	
		guard {
			var condition = self.metrics.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.metrics.isEmpty();
		}
		
		message: "Missing metrics on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique metricsSpecification {
	
		guard {
			var condition = not self.metrics.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.metrics.isEmpty();
		}		
		message: "Constraint metricsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique units_Specification {
	
		guard {
			var condition = self.units.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.units.isEmpty();
		}
		
		message: "Missing units on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique unitsSpecification {
	
		guard {
			var condition = not self.units.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.units.isEmpty();
		}		
		message: "Constraint unitsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique SensorDataMngmtMechanism_Specification {
	
		guard {
			var condition = self.SensorDataMngmtMechanism.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.SensorDataMngmtMechanism.isEmpty();
		}
		
		message: "Missing SensorDataMngmtMechanism on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique SensorDataMngmtMechanismSpecification {
	
		guard {
			var condition = not self.SensorDataMngmtMechanism.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.SensorDataMngmtMechanism.isEmpty();
		}		
		message: "Constraint SensorDataMngmtMechanismIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique testConfigs_Specification {
	
		guard {
			var condition = self.testConfigs.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.testConfigs.isEmpty();
		}
		
		message: "Missing testConfigs on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique testConfigsSpecification {
	
		guard {
			var condition = not self.testConfigs.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.testConfigs.isEmpty();
		}		
		message: "Constraint testConfigsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique configs_Specification {
	
		guard {
			var condition = self.configs.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.configs.isEmpty();
		}
		
		message: "Missing configs on Infrastructure applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique configsSpecification {
	
		guard {
			var condition = not self.configs.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.configs.isEmpty();
		}		
		message: "Constraint configsIsDefined failed on Infrastructure "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
}

	

