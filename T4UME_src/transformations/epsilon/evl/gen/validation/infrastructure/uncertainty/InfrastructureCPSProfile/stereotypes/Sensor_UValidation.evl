
/*
Autogenerated Uncertainty Detection Rule (UDR).
The UDR aims at detecting potential infrastructural uncertainties caused by missing
information on UML Model.

This rule check the following stereotype: 
InfrastructureCPSProfile::Sensor. 

Sensor defines the following properties:
-	InfrastructureCPSProfile::Sensor::phyMetrics
-	InfrastructureCPSProfile::Sensor::minValue
-	InfrastructureCPSProfile::Sensor::maxValue
-	InfrastructureCPSProfile::Sensor::value
-	InfrastructureCPSProfile::Sensor::phyCapabilities
-	InfrastructureCPSProfile::PhysicalUnit::sensors
-	InfrastructureCPSProfile::PhysicalUnit::actuators
-	InfrastructureCPSProfile::PhysicalUnit::ownedPhysicalUnits
-	InfrastructureCPSProfile::PhysicalUnit::ioDevices
-	InfrastructureCPSProfile::Unit::id
-	InfrastructureCPSProfile::Unit::location
-	InfrastructureCPSProfile::Unit::description
-	InfrastructureCPSProfile::Unit::ownedUnits
-	InfrastructureCPSProfile::Unit::hasTimestampMechanism
-	InfrastructureCPSProfile::Unit::timestampMaxLatency
-	InfrastructureCPSProfile::Unit::isSafetyCritical
-	InfrastructureCPSProfile::InfrastructureElement::infrastructureInterface
*/
//libraries
import "../../../../../../../eol/library/gen/profiles/InfrastructureUncertaintyProfile.eol";
import "../../../../../../../eol/library/gen/profiles/InfrastructureCPSProfile.eol";
import "../../../../../../../eol/library/gen/profiles/CoreProfile.eol";
import "../../../../../../../eol/library/gen/profiles/InternalUProfileLibrary.eol";
import "../../../../../../../eol/library/gen/uncertainties/UncertaintyTaxonomyLibrary.eol";

pre {
var plugin : new Native("at.ac.tuwien.dsg.T4UME");
var UMLUtil = plugin.getUMLUtil();
var ModelerAgent = plugin.getModelerAgent();
var infrastructureUncertaintyProfile = Profile.all.selectOne(e|e.name = "InfrastructureUncertaintyProfile");
var infrastructureCPSProfile = Profile.all.selectOne(e|e.name = "InfrastructureCPSProfile");
var internalUProfileLibrary = Profile.all.selectOne(e|e.name = "InternalUProfileLibrary");
var coreProfile = Profile.all.selectOne(e|e.name = "CoreProfile");

}

context Sensor {
	
	critique phyMetrics_Specification {
	
		guard {
			var condition = self.phyMetrics.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.phyMetrics.isEmpty();
		}
		
		message: "Missing phyMetrics on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique phyMetricsSpecification {
	
		guard {
			var condition = not self.phyMetrics.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.phyMetrics.isEmpty();
		}		
		message: "Constraint phyMetricsIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique phyCapabilities_Specification {
	
		guard {
			var condition = self.phyCapabilities.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.phyCapabilities.isEmpty();
		}
		
		message: "Missing phyCapabilities on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique phyCapabilitiesSpecification {
	
		guard {
			var condition = not self.phyCapabilities.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.phyCapabilities.isEmpty();
		}		
		message: "Constraint phyCapabilitiesIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique sensors_Specification {
	
		guard {
			var condition = self.sensors.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.sensors.isEmpty();
		}
		
		message: "Missing sensors on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique sensorsSpecification {
	
		guard {
			var condition = not self.sensors.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.sensors.isEmpty();
		}		
		message: "Constraint sensorsIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique actuators_Specification {
	
		guard {
			var condition = self.actuators.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.actuators.isEmpty();
		}
		
		message: "Missing actuators on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique actuatorsSpecification {
	
		guard {
			var condition = not self.actuators.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.actuators.isEmpty();
		}		
		message: "Constraint actuatorsIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique ownedPhysicalUnits_Specification {
	
		guard {
			var condition = self.ownedPhysicalUnits.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ownedPhysicalUnits.isEmpty();
		}
		
		message: "Missing ownedPhysicalUnits on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique ownedPhysicalUnitsSpecification {
	
		guard {
			var condition = not self.ownedPhysicalUnits.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ownedPhysicalUnits.isEmpty();
		}		
		message: "Constraint ownedPhysicalUnitsIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique ioDevices_Specification {
	
		guard {
			var condition = self.ioDevices.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ioDevices.isEmpty();
		}
		
		message: "Missing ioDevices on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique ioDevicesSpecification {
	
		guard {
			var condition = not self.ioDevices.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ioDevices.isEmpty();
		}		
		message: "Constraint ioDevicesIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique ownedUnits_Specification {
	
		guard {
			var condition = self.ownedUnits.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ownedUnits.isEmpty();
		}
		
		message: "Missing ownedUnits on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique ownedUnitsSpecification {
	
		guard {
			var condition = not self.ownedUnits.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.ownedUnits.isEmpty();
		}		
		message: "Constraint ownedUnitsIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
	critique infrastructureInterface_Specification {
	
		guard {
			var condition = self.infrastructureInterface.isKindOf(Collection);
			return condition;
		}
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.infrastructureInterface.isEmpty();
		}
		
		message: "Missing infrastructureInterface on Sensor applied to "+ baseElement.getQualifiedName()		
		fix {
			title : "Generate StorageUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ActuationUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate UncertaintyFamily State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}

				}
			}
		}
		fix {
			title : "Generate GovernanceUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate DataDeliveryUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ElasticityUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}

				}
			}
		}
		fix {
			title : "Generate ExecutionEnvironmentUncertainty State in " + baseElement.getQualifiedName()
			do {
				transaction {
					//check if the behaviored classifier defines a state machine or not
					var owned_behaviors = baseElement.getOwnedBehaviors();
					
					/*
					var owned_statemachines = owned_behaviors.select(e|e.type.getName()="StateMachine");
					if(not (owned_statemachines.isEmpty()) ){
						UserInput.inform(baseElement.name + "contains " + owned_statemachines.size().asString() + "state machine(s)");
					}
					*/
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}

				}
			}
		}
		
	}

	critique infrastructureInterfaceSpecification {
	
		guard {
			var condition = not self.infrastructureInterface.isKindOf(Collection);
			return condition;
		} 
		
		check {
			var baseElement = UMLUtil.getBaseElement(self);
			return not self.infrastructureInterface.isEmpty();
		}		
		message: "Constraint infrastructureInterfaceIsDefined failed on Sensor "+ baseElement.getName() +". It causes this uncertainty bla bla bla"		
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createStorageUncertaintyStateMachine();
					var storageUncertainty = coreProfile.getStorageUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(storageUncertainty) 
						and not (baseElement.isStereotypeApplied(storageUncertainty))){
						baseElement.applyStereotype(storageUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createActuationUncertaintyStateMachine();
					var actuationUncertainty = coreProfile.getActuationUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(actuationUncertainty) 
						and not (baseElement.isStereotypeApplied(actuationUncertainty))){
						baseElement.applyStereotype(actuationUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createUncertaintyFamilyStateMachine();
					var uncertaintyFamily = coreProfile.getUncertaintyFamilyStereotype();
					
					if(baseElement.isStereotypeApplicable(uncertaintyFamily) 
						and not (baseElement.isStereotypeApplied(uncertaintyFamily))){
						baseElement.applyStereotype(uncertaintyFamily);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createGovernanceUncertaintyStateMachine();
					var governanceUncertainty = coreProfile.getGovernanceUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(governanceUncertainty) 
						and not (baseElement.isStereotypeApplied(governanceUncertainty))){
						baseElement.applyStereotype(governanceUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createDataDeliveryUncertaintyStateMachine();
					var dataDeliveryUncertainty = coreProfile.getDataDeliveryUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(dataDeliveryUncertainty) 
						and not (baseElement.isStereotypeApplied(dataDeliveryUncertainty))){
						baseElement.applyStereotype(dataDeliveryUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createElasticityUncertaintyStateMachine();
					var elasticityUncertainty = coreProfile.getElasticityUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(elasticityUncertainty) 
						and not (baseElement.isStereotypeApplied(elasticityUncertainty))){
						baseElement.applyStereotype(elasticityUncertainty);
					}
				}
			}
		}
		fix {
			title : "Create Infrastructure Uncertainty State to " + baseElement.getName()
			do {
				transaction {
					baseElement.createExecutionEnvironmentUncertaintyStateMachine();
					var executionEnvironmentUncertainty = coreProfile.getExecutionEnvironmentUncertaintyStereotype();
					
					if(baseElement.isStereotypeApplicable(executionEnvironmentUncertainty) 
						and not (baseElement.isStereotypeApplied(executionEnvironmentUncertainty))){
						baseElement.applyStereotype(executionEnvironmentUncertainty);
					}
				}
			}
		}
	}
	
}

	

